//FINITO

import 'package:smartsoadsense_core_package/SmartRoadSense-Core-Package.dart';
import 'package:test/test.dart';

import 'SmartRoadSenseTest.dart';

void testWindow(int width, List<double> reference) {
  var window = HammingWindow.generate(width);
  CheckExtensions.assertError(window, reference);
}

void main() {
  group('Hamming Windows size', () {
    test('Test 20', () {
      List<double> _javaHamming20 = new List<double>.unmodifiable([
        0.08000000000000002,
        0.08190585243549564,
        0.08760761724847865,
        0.09705804782001237,
        0.11017883490609132,
        0.12686125553269978,
        0.1469670739086153,
        0.17032968689071004,
        0.19675550451006468,
        0.2260255541194191,
        0.2578972948694905,
        0.2921066274788352,
        0.32837008264367,
        0.3663871699537974,
        0.4058428678507805,
        0.4464102339957884,
        0.4877531144167816,
        0.5295289289861914,
        0.5713915101477487,
        0.6129939713698755,
        0.653991581556734,
        0.6940446215986537,
        0.7328211993916653,
        0.7699999999999999,
        0.8052729481728389,
        0.8383477611528678,
        0.8689503706232538,
        0.8968271937240331,
        0.9217472343195516,
        0.9435039971051934,
        0.9619171986925084,
        0.9768342614941469,
        0.9881315780298003,
        0.9957155351767122,
        0.9995232898774947,
        0.9995232898774947,
        0.9957155351767122,
        0.9881315780298005,
        0.976834261494147,
        0.9619171986925086,
        0.9435039971051935,
        0.9217472343195516,
        0.8968271937240331,
        0.8689503706232539,
        0.838347761152868,
        0.8052729481728389,
        0.7700000000000002,
        0.7328211993916656,
        0.6940446215986538,
        0.6539915815567343,
        0.6129939713698757,
        0.5713915101477489,
        0.5295289289861913,
        0.4877531144167817,
        0.4464102339957887,
        0.4058428678507805,
        0.3663871699537975,
        0.3283700826436703,
        0.2921066274788353,
        0.2578972948694907,
        0.22602555411941938,
        0.19675550451006474,
        0.1703296868907102,
        0.1469670739086153,
        0.12686125553269983,
        0.11017883490609143,
        0.09705804782001237,
        0.08760761724847871,
        0.08190585243549564,
        0.08000000000000002
      ]);

      expect(() => testWindow(_javaHamming20.length, _javaHamming20),
          returnsNormally);
      //testWindow(_javaHamming20.length, _javaHamming20);
    });

    test('Test 40', () {
      List<double> _javaHamming40 = new List<double>.unmodifiable([
        0.08000000000000002,
        0.08114584843064865,
        0.08457768516335101,
        0.0902784129601314,
        0.09821963108186155,
        0.10836177677931447,
        0.12065432239279078,
        0.13503602707837803,
        0.15143524190675428,
        0.16977026681455015,
        0.18994975762995486,
        0.2118731811447851,
        0.2354313159658718,
        0.2605067966505465,
        0.286974698415373,
        0.31470315950513494,
        0.34355403812146706,
        0.373383600638346,
        0.4040432376757853,
        0.4353802044642911,
        0.4672383818116202,
        0.4994590538807432,
        0.5318816989041608,
        0.564344788895275,
        0.596686594372693,
        0.6287459900883685,
        0.6603632577454828,
        0.6913808817069647,
        0.721644333730472,
        0.7510028428203216,
        0.7793101463610058,
        0.8064252187901852,
        0.8322129741809478,
        0.8565449392330997,
        0.8792998933206863,
        0.9003644724070522,
        0.9196337338187696,
        0.9370116790647587,
        0.9524117320959412,
        0.9657571706227617,
        0.9769815083417759,
        0.9860288261670686,
        0.9928540508163284,
        0.9974231793636718,
        0.99971344864051,
        0.99971344864051,
        0.9974231793636719,
        0.9928540508163284,
        0.9860288261670687,
        0.9769815083417759,
        0.9657571706227618,
        0.9524117320959413,
        0.9370116790647588,
        0.9196337338187697,
        0.9003644724070523,
        0.8792998933206864,
        0.8565449392330998,
        0.832212974180948,
        0.8064252187901855,
        0.7793101463610059,
        0.7510028428203217,
        0.721644333730472,
        0.6913808817069649,
        0.6603632577454829,
        0.6287459900883687,
        0.5966865943726931,
        0.564344788895275,
        0.5318816989041611,
        0.4994590538807434,
        0.46723838181162025,
        0.43538020446429115,
        0.4040432376757853,
        0.3733836006383463,
        0.34355403812146723,
        0.31470315950513505,
        0.28697469841537304,
        0.26050679665054643,
        0.23543131596587202,
        0.21187318114478526,
        0.18994975762995492,
        0.1697702668145502,
        0.15143524190675428,
        0.13503602707837814,
        0.12065432239279084,
        0.10836177677931447,
        0.09821963108186155,
        0.0902784129601314,
        0.08457768516335101,
        0.08114584843064865,
        0.08000000000000002
      ]);

      //testWindow(_javaHamming40.length, _javaHamming40);
      expect(() => testWindow(_javaHamming40.length, _javaHamming40),
          returnsNormally);
    });

    test('Test 100', () {
      List<double> _javaHamming100 = new List<double>.unmodifiable([
        0.08000000000000002,
        0.08040893160660861,
        0.08163499936096097,
        0.08367602335933272,
        0.08652837473553787,
        0.09018698211292042,
        0.09464534062107699,
        0.09989552346127895,
        0.1059281960000314,
        0.11273263236571074,
        0.12029673451877315,
        0.12860705376162734,
        0.137648814649928,
        0.1474059412627769,
        0.1578610857851231,
        0.16899565935154565,
        0.1807898650965774,
        0.19322273335280982,
        0.20627215893419593,
        0.21991494043826493,
        0.2341268214973687,
        0.24888253390561826,
        0.26415584254483226,
        0.27991959202961897,
        0.296145754988661,
        0.3128054818963588,
        0.32986915236623393,
        0.3473064278148955,
        0.3650863054029345,
        0.38317717315684063,
        0.40154686617393753,
        0.4201627238104059,
        0.4389916477507171,
        0.45800016085522904,
        0.47715446668131967,
        0.4964205095722286,
        0.5157640352067715,
        0.5351506515022735,
        0.554545889762437,
        0.5739152659614264,
        0.5932243420552062,
        0.6124387872111282,
        0.6315244388468979,
        0.6504473633703998,
        0.6691739165123853,
        0.6876708031447563,
        0.7059051364780875,
        0.7238444965331379,
        0.7414569877823907,
        0.7587112958591375,
        0.7755767432332793,
        0.7920233437548561,
        0.8080218559683261,
        0.8235438351028075,
        0.8385616836458432,
        0.8530487004107699,
        0.8669791280104544,
        0.8803281986529876,
        0.893072178177915,
        0.9051884082547071,
        0.9166553466684453,
        0.9274526056210928,
        0.9375609879802563,
        0.9469625214109866,
        0.9556404903299338,
        0.9635794656250455,
        0.9707653320879639,
        0.9771853135103518,
        0.9828279953995246,
        0.9876833452730018,
        0.9917427304958948,
        0.9949989336294163,
        0.9974461652632234,
        0.9990800743087784,
        0.9998977557354244,
        0.9998977557354244,
        0.9990800743087784,
        0.9974461652632234,
        0.9949989336294163,
        0.9917427304958948,
        0.9876833452730018,
        0.9828279953995246,
        0.9771853135103519,
        0.9707653320879639,
        0.9635794656250456,
        0.9556404903299338,
        0.9469625214109865,
        0.9375609879802564,
        0.9274526056210928,
        0.9166553466684453,
        0.9051884082547073,
        0.893072178177915,
        0.8803281986529877,
        0.8669791280104544,
        0.8530487004107699,
        0.838561683645843,
        0.8235438351028076,
        0.8080218559683259,
        0.7920233437548558,
        0.7755767432332794,
        0.7587112958591374,
        0.7414569877823906,
        0.723844496533138,
        0.7059051364780875,
        0.6876708031447563,
        0.6691739165123854,
        0.6504473633703998,
        0.6315244388468978,
        0.6124387872111284,
        0.5932243420552062,
        0.5739152659614263,
        0.5545458897624372,
        0.5351506515022735,
        0.5157640352067714,
        0.4964205095722288,
        0.4771544666813198,
        0.45800016085522893,
        0.43899164775071686,
        0.42016272381040604,
        0.4015468661739374,
        0.38317717315684047,
        0.36508630540293463,
        0.3473064278148955,
        0.32986915236623376,
        0.3128054818963589,
        0.296145754988661,
        0.2799195920296188,
        0.2641558425448323,
        0.24888253390561826,
        0.23412682149736858,
        0.2199149404382651,
        0.20627215893419593,
        0.19322273335280976,
        0.18078986509657752,
        0.16899565935154565,
        0.15786108578512303,
        0.147405941262777,
        0.13764881464992806,
        0.1286070537616273,
        0.12029673451877321,
        0.11273263236571074,
        0.10592819600003134,
        0.09989552346127889,
        0.09464534062107699,
        0.09018698211292042,
        0.08652837473553782,
        0.08367602335933272,
        0.08163499936096097,
        0.08040893160660861,
        0.08000000000000002
      ]);
      //testWindow(_javaHamming100.length, _javaHamming100);
      expect(() => testWindow(_javaHamming100.length, _javaHamming100),
          returnsNormally);
    });
  });
}
